---
title: 内存的管理
date: '2017-12-10 13:00:00'
categories: [
Internet
]
layout: post
author: xy
---

### 内存的管理

内存是计算机中重要资源之一。一般来说，物理内存是无法容纳所有的进程，因此，操作系统如何有效的管理内存是很重要的。

之前的操作系统，是通过物理地址来使用内存的，cpu就根据某个寄存器（用于存储数据）中相应的值，直接到物理内存去取值。但这样存在两个问题：一是，我们需要知道物理地址的值，当程序开始执行，也就是执行程序从磁盘被load到物理内存中后，必须告诉cpu，程序是从哪个地址（寄存器的值）开始执行。二是，程序使用的内存会被物理内存所限制，假设计算机有1G内存，而程序需要占用2G内存，这是远远不够用的。因此为了解决这两个问题，就产生了虚拟内存用于管理。

1、虚拟内存
    
利用间接的地址访问物理内存，这个中间层就是虚拟内存，程序中访问的内存地址不再是实际的物理内存地址，而是一个虚拟地址，然后由操作系统将虚拟地址映射到物理内存地址上。因此，操作系统只要需要处理好虚拟地址到物理内存地址的映射，就可以保证不同的程序最终访问的内存地址不重复，达到内存地址空间的隔离。


虚拟内存的基本思想是，每个进程有用独立的逻辑地址空间，内存被分为大小相等的多个块（页），每个页都是一段连续的地址，对于进程来看，逻辑上貌似有很多内存空间，其中一部分对应物理内存上的一块（页），还有一些没加载在内存中的对应在硬盘上。

![内存](/images/内存.jpg)

如上图为例，虚拟内存实际上可以比物理内存大。当访问虚拟内存时，会访问内存管理器去匹配对应的物理地址，如果虚拟内存的页不在物理内存中，会产生缺页中断，就从磁盘中取得缺的页放入内存，如果内存已经满了，就会根据内存的算法将磁盘中的页换出。




 










